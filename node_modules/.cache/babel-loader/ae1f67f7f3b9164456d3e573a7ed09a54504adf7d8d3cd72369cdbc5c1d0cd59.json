{"ast":null,"code":"import React,{useState}from\"react\";import useStore from'../store/store';import{useNavigate}from'react-router-dom';import axios from'axios';import Avatar from\"@mui/material/Avatar\";import Button from\"@mui/material/Button\";import CssBaseline from\"@mui/material/CssBaseline\";import TextField from\"@mui/material/TextField\";import Link from\"@mui/material/Link\";import Grid from\"@mui/material/Grid\";import Box from\"@mui/material/Box\";import LockOutlinedIcon from\"@mui/icons-material/LockOutlined\";import Typography from\"@mui/material/Typography\";import Container from\"@mui/material/Container\";import{createTheme,ThemeProvider}from\"@mui/material/styles\";import styles from\"../Modals/ModalBasic.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Copyright(props){return/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",align:\"center\",...props,children:[\"Copyright © \",/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"https://mui.com/\",children:\"Your Website\"}),\" \",new Date().getFullYear(),\".\"]});}// TODO remove, this demo shouldn't need to reset the theme.\nconst defaultTheme=createTheme();export default function SignIn(_ref){let{setModalOpen}=_ref;// 모달 끄기\nconst closeSignInModal=()=>{setModalOpen(false);};// navigate 선언\nconst navigate=useNavigate();const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const{is_login,setIsLogin}=useStore();async function handleSubmit(e){localStorage.clear();// 로그인 실행 시, 브라우저 로컬저장소에 있는 값을 모두 날려 충돌 방지 \ntry{// .env를 바탕으로 backend 상대경로를 지정\nconsole.log('URL:',\"\".concat(process.env.REACT_APP_BACKEND_URL,\":\").concat(process.env.REACT_APP_BACKEND_PORT,\"/accounts/token/\"));console.log('email:',email);console.log('password:',password);const response=await axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\":\").concat(process.env.REACT_APP_BACKEND_PORT,\"/accounts/token/\"),{email:email,password:password});if(response){localStorage.setItem('ACCESS_TOKEN',response.data.access);//access token을 local storage에 저장\nconsole.log('로그인 성공!');setIsLogin(true);navigate(\"/\");// token 저장 후 Main page로 이동\ncloseSignInModal();// mddal \n}}catch(error){console.log(\"Authentication failed\",error);// response를 못받아 error를 띄울 경우 콘솔에 에러 띄우기\n}};return/*#__PURE__*/_jsx(\"div\",{className:styles.modalbox,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.modal,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.close,onClick:closeSignInModal,children:\"X\"}),/*#__PURE__*/_jsx(ThemeProvider,{theme:defaultTheme,children:/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(Box,{sx:{marginTop:8,display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:\"secondary.main\"},children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Sign in\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",autoFocus:true}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},children:\"Sign In\"}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:true,children:/*#__PURE__*/_jsx(Link,{href:\"#\",variant:\"body2\",children:\"Forgot password?\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Link,{href:\"#\",variant:\"body2\",children:\"Don't have an account? Sign Up\"})})]})]})]}),/*#__PURE__*/_jsx(Copyright,{sx:{mt:8,mb:4}})]})})]})});}","map":{"version":3,"names":["React","useState","useStore","useNavigate","axios","Avatar","Button","CssBaseline","TextField","Link","Grid","Box","LockOutlinedIcon","Typography","Container","createTheme","ThemeProvider","styles","jsx","_jsx","jsxs","_jsxs","Copyright","props","variant","color","align","children","href","Date","getFullYear","defaultTheme","SignIn","_ref","setModalOpen","closeSignInModal","navigate","email","setEmail","password","setPassword","is_login","setIsLogin","handleSubmit","e","localStorage","clear","console","log","concat","process","env","REACT_APP_BACKEND_URL","REACT_APP_BACKEND_PORT","response","post","setItem","data","access","error","className","modalbox","modal","close","onClick","theme","component","maxWidth","sx","marginTop","display","flexDirection","alignItems","m","bgcolor","onSubmit","noValidate","mt","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","type","mb","container","item","xs"],"sources":["/Users/joshuagwak/Documents/workspace/joshua_finalCSS/src/Modals/SignIn.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport useStore from '../store/store';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Avatar from \"@mui/material/Avatar\";\nimport Button from \"@mui/material/Button\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport TextField from \"@mui/material/TextField\";\nimport Link from \"@mui/material/Link\";\nimport Grid from \"@mui/material/Grid\";\nimport Box from \"@mui/material/Box\";\nimport LockOutlinedIcon from \"@mui/icons-material/LockOutlined\";\nimport Typography from \"@mui/material/Typography\";\nimport Container from \"@mui/material/Container\";\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport styles from \"../Modals/ModalBasic.module.css\";\n\nfunction Copyright(props) {\n  return (\n    <Typography\n      variant=\"body2\"\n      color=\"text.secondary\"\n      align=\"center\"\n      {...props}\n    >\n      {\"Copyright © \"}\n      <Link color=\"inherit\" href=\"https://mui.com/\">\n        Your Website\n      </Link>{\" \"}\n      {new Date().getFullYear()}\n      {\".\"}\n    </Typography>\n  );\n}\n\n// TODO remove, this demo shouldn't need to reset the theme.\n\nconst defaultTheme = createTheme();\n\nexport default function SignIn({ setModalOpen }: PropsType) {\n  // 모달 끄기\n  const closeSignInModal = () => {\n    setModalOpen(false);\n  };\n  // navigate 선언\n  const navigate = useNavigate();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { is_login, setIsLogin } = useStore();\n\n  async function handleSubmit(e) {\n    localStorage.clear(); // 로그인 실행 시, 브라우저 로컬저장소에 있는 값을 모두 날려 충돌 방지 \n    try {\n      // .env를 바탕으로 backend 상대경로를 지정\n      console.log('URL:', `${process.env.REACT_APP_BACKEND_URL}:${process.env.REACT_APP_BACKEND_PORT}/accounts/token/`)\n      console.log('email:', email)\n      console.log('password:', password)\n      const response = await axios.post(\n        `${process.env.REACT_APP_BACKEND_URL}:${process.env.REACT_APP_BACKEND_PORT}/accounts/token/`,\n        {\n          email: email,\n          password: password,\n        },\n      );\n      if (response) {\n        localStorage.setItem('ACCESS_TOKEN', response.data.access); //access token을 local storage에 저장\n        console.log('로그인 성공!')\n        setIsLogin(true);\n        navigate(\"/\");  // token 저장 후 Main page로 이동\n        closeSignInModal(); // mddal \n      }\n    } catch (error) {\n      console.log(\"Authentication failed\", error);  // response를 못받아 error를 띄울 경우 콘솔에 에러 띄우기\n    }\n  };\n\n  return (\n    <div className={styles.modalbox}>\n      <div className={styles.modal}>\n        <button className={styles.close} onClick={closeSignInModal}>\n          X\n        </button>\n        <ThemeProvider theme={defaultTheme}>\n          <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <Box\n              sx={{\n                marginTop: 8,\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n              }}\n            >\n              <Avatar sx={{ m: 1, bgcolor: \"secondary.main\" }}>\n                <LockOutlinedIcon />\n              </Avatar>\n              <Typography component=\"h1\" variant=\"h5\">\n                Sign in\n              </Typography>\n              <Box\n                component=\"form\"\n                onSubmit={handleSubmit}\n                noValidate\n                sx={{ mt: 1 }}\n              >\n                <TextField\n                  margin=\"normal\"\n                  required\n                  fullWidth\n                  id=\"email\"\n                  label=\"Email Address\"\n                  name=\"email\"\n                  autoComplete=\"email\"\n                  autoFocus\n                />\n                <TextField\n                  margin=\"normal\"\n                  required\n                  fullWidth\n                  name=\"password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  id=\"password\"\n                  autoComplete=\"current-password\"\n                />\n\n                <Button\n                  type=\"submit\"\n                  fullWidth\n                  variant=\"contained\"\n                  sx={{ mt: 3, mb: 2 }}\n                >\n                  Sign In\n                </Button>\n                <Grid container>\n                  <Grid item xs>\n                    <Link href=\"#\" variant=\"body2\">\n                      Forgot password?\n                    </Link>\n                  </Grid>\n                  <Grid item>\n                    <Link href=\"#\" variant=\"body2\">\n                      {\"Don't have an account? Sign Up\"}\n                    </Link>\n                  </Grid>\n                </Grid>\n              </Box>\n            </Box>\n            <Copyright sx={{ mt: 8, mb: 4 }} />\n          </Container>\n        </ThemeProvider>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}