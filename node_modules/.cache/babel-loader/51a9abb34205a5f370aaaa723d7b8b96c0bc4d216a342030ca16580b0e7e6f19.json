{"ast":null,"code":"import React,{useState}from\"react\";import axios from'axios';import{useNavigate}from\"react-router-dom\";import Posting from\"../Components/Posting.jsx\";import\"../Layout/Layout.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Mypage(){const[postlist,setPostList]=useState([]);const[username,setUserName]=useState('');const[email,setEmail]=useState('');const[phonenumber,setPhoneNumber]=useState('');const[address,setAdress]=useState('');const[password,setPassword]=useState('');// Profile 수정 modal창을 위해서 임시로 배치\nconst handleUserNameChange=e=>{setUserName(e.target.value);};// const handleEmailChange = (e) => {\n//     setEmail(e.target.value);\n// };\n// const handlePhoneNumberChange = (e) => {\n//     setPhoneNumber(e.target.value);\n// };\n// const handleAddressChange = (e) => {\n//     setAdress(e.target.value);\n// };\n// const handlePasswordChange = (e) => {\n//     setPassword(e.target.value);\n// };\nasync function requestUserProfile(){try{const response=await axios.get(\"\".concat(process.env.REACT_APP_BACKEND_URL,\":\").concat(process.env.REACT_APP_BACKEND_PORT,\"/accounts/profile/\"),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"ACCESS_TOKEN\")}});console.log(\"response.data:\",response.data);if(response){console.log(\"Profile을 모두 불러오는 중...\");setUserName(response.data.username);setEmail(response.data.email);setPhoneNumber(response.data.phone_number);setAdress(response.data.address);}}catch(error){console.error(\"Authentication failed\",error);}}// 서버에서 post를 조회하는 함수\nasync function requestPosts(){try{setPostList([]);// postlist 초기화\nconst response=await axios.get(\"\".concat(process.env.REACT_APP_BACKEND_URL,\":\").concat(process.env.REACT_APP_BACKEND_PORT,\"/posts/\"),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"ACCESS_TOKEN\")}});console.log(\"response.data:\",response.data);if(response){console.log(\"post를 모두 불러오는 중...\");let before_filtered_postlist=response.data;setPostList(response.data);}}catch(error){console.error(\"Error:\",error);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"MyPage-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"Mypage-profileimage\",src:\"\",alt:\"No image\"}),/*#__PURE__*/_jsx(\"div\",{children:username}),/*#__PURE__*/_jsx(\"div\",{className:\"Mypage-bio\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",username]})}),/*#__PURE__*/_jsx(\"button\",{className:\"editprofile\",children:\"Edit bio\"}),/*#__PURE__*/_jsx(\"button\",{className:\"editprofile\",children:\"My feed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Mypage-grid\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Hey!\"}),postlist.map(posts=>/*#__PURE__*/_jsx(Posting,{id:posts.id,image:posts.image,title:posts.title,content:posts.content},posts.id))]})]});}export default Mypage;","map":{"version":3,"names":["React","useState","axios","useNavigate","Posting","jsx","_jsx","jsxs","_jsxs","Mypage","postlist","setPostList","username","setUserName","email","setEmail","phonenumber","setPhoneNumber","address","setAdress","password","setPassword","handleUserNameChange","e","target","value","requestUserProfile","response","get","concat","process","env","REACT_APP_BACKEND_URL","REACT_APP_BACKEND_PORT","headers","Authorization","localStorage","getItem","console","log","data","phone_number","error","requestPosts","before_filtered_postlist","className","children","src","alt","map","posts","id","image","title","content"],"sources":["/Users/joshuagwak/Documents/workspace/joshua_finalCSS/src/Pages/Mypage.jsx"],"sourcesContent":["import React, { useState, } from \"react\";\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\nimport Posting from \"../Components/Posting.jsx\";\nimport \"../Layout/Layout.css\"\n\nfunction Mypage() {\n    const [postlist, setPostList] = useState([]);\n    const [username, setUserName] = useState('');\n    const [email, setEmail] = useState('');\n    const [phonenumber, setPhoneNumber] = useState('');\n    const [address, setAdress] = useState('');\n    const [password, setPassword] = useState('');\n\n    // Profile 수정 modal창을 위해서 임시로 배치\n    const handleUserNameChange = (e) => {\n        setUserName(e.target.value);\n    };\n\n    // const handleEmailChange = (e) => {\n    //     setEmail(e.target.value);\n    // };\n\n    // const handlePhoneNumberChange = (e) => {\n    //     setPhoneNumber(e.target.value);\n    // };\n\n    // const handleAddressChange = (e) => {\n    //     setAdress(e.target.value);\n    // };\n\n    // const handlePasswordChange = (e) => {\n    //     setPassword(e.target.value);\n    // };\n\n\n    async function requestUserProfile() {\n        try {\n        const response = await axios.get(\n            `${process.env.REACT_APP_BACKEND_URL}:${process.env.REACT_APP_BACKEND_PORT}/accounts/profile/`, \n            { headers: { Authorization: \"Bearer \" + localStorage.getItem(\"ACCESS_TOKEN\") },}\n        );\n        console.log(\"response.data:\", response.data)\n        if (response) {\n            console.log(\"Profile을 모두 불러오는 중...\");\n            setUserName(response.data.username);\n            setEmail(response.data.email);\n            setPhoneNumber(response.data.phone_number);\n            setAdress(response.data.address);\n        }\n        } catch (error) {\n        console.error(\"Authentication failed\", error);\n        }\n    }\n\n        // 서버에서 post를 조회하는 함수\n    async function requestPosts() {\n        try {\n        setPostList([]);  // postlist 초기화\n        const response = await axios.get(\n            `${process.env.REACT_APP_BACKEND_URL}:${process.env.REACT_APP_BACKEND_PORT}/posts/`, {\n            headers: { Authorization: \"Bearer \" + localStorage.getItem(\"ACCESS_TOKEN\") },\n        }\n        );\n        console.log(\"response.data:\", response.data)\n        if (response) {\n            console.log(\"post를 모두 불러오는 중...\");\n            let before_filtered_postlist = response.data\n\n            setPostList(response.data)\n        }\n        } catch (error) {\n        console.error(\"Error:\", error);\n        }\n    }\n\n    return (\n        <div className='MyPage-container'>\n            <div className=\"profile-container\">\n                <img\n                    className='Mypage-profileimage'\n                    src=''\n                    alt='No image'\n                />\n                <div>{username}</div>\n                <div className='Mypage-bio'>\n                    <p>Username: {username}</p>\n                    {/* <p>E-mail: {email}</p>\n                    <p>Phone-number: {phonenumber}</p>\n                    <p>Address: {address}</p> */}\n                </div>\n                <button className=\"editprofile\">Edit bio</button>\n                <button className=\"editprofile\">My feed</button>\n            </div>\n            <div className='Mypage-grid'>\n                <h1>Hey!</h1>\n                {postlist.map((posts) => (\n                    <Posting key={posts.id}\n                        id={posts.id}\n                        image={posts.image}\n                        title={posts.title}\n                        content={posts.content}\n                    />\n                ))}\n            </div>\n\n        </div>\n    )\n}\n\nexport default Mypage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}